############################################################################
# This Dockerfile is auto-generated by HathoraDocker.cs @ 2023-07-26_134423
############################################################################

# Using 'Jammy Jellyfish' Ubuntu LTS
FROM ubuntu:22.04

# Copy the server build files into the container, if Dockerfile is @ parent
COPY ./Build-Server .

# Update system and install certificates: Prevents TLS/SSL (https) errs, notably with UnityWebRequests
RUN apt-get update && \
    apt-get install -y ca-certificates && \
    update-ca-certificates

# Give execute permission for the script
RUN chmod +x ./Hathora-Unity_LinuxServer.x86_64

# Run the Linux server in headless mode as a dedicated server
# Add `-scene <sceneName>` to load a scene before loading the mode
CMD [ \
  "./Hathora-Unity_LinuxServer.x86_64", \
  "-batchmode", \
  "-nographics", \
  "-mode server" \
]
